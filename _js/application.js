"use strict";function QueryAPI(a,b){var c=new SecretValues;$("#loading_icon").addClass("waiting"),$.getJSON(c.apiURI+a+"?APPID="+c.appid+"&q="+b,function(c){switch(toggleCondtions("unset"),$("#loading_icon").removeClass("waiting"),a){case"weather":new Layout("weather",c,b);toggleCondtions();break;case"forecast":new Layout("forecast",c)}})}function convertTemp(a,b){switch(b){case"celsius":var c=273.15;break;default:var c=273.15}return Math.floor(a-c)}function convertDay(a){var b,c;console.log(a),0==a?(b="12",c="AM"):9>=a?(a=Math.floor(.1*a*10),b=a,c="AM"):a>=12?(b=a-12,c="PM"):(b=a,c="AM");var d=b+" "+c;return d}function convertClouds(a,b){var c;switch(a){case"Mist":c="mist";break;case"Clouds":switch(b){case"few clouds":c="clouds_partially";break;case"broken clouds":c="cloud_clear";break;case"scattered clouds":c="cloud_dark";break;default:c="cloud_clear"}break;case"Clear":c="sun";break;case"Drizzle":c="mist";break;case"Rain":c="heavy_rain";break;default:c="sun"}return c}function toggleCondtions(a){a?(window.clearInterval(myCallback),console.log("interval cleared")):myCallback=window.setInterval(function(){var a=document.getElementById("weather_condition_icon"),b=document.getElementById("current_temp_icon");a.classList.toggle("animate-temp"),b.classList.toggle("animate-temp")},5e3)}function SecretValues(){this.appid="f0901ef671e7f5d5695810eb87f220ba",this.apiURI="http://api.openweathermap.org/data/2.5/"}function currentWeatherDisplay(a,b){var c=document.getElementById("weather_condition"),d=document.getElementById("app"),e=a.name,f=convertTemp(a.main.temp),g=a.wind.speed,h=a.weather[0].description,i=convertClouds(a.weather[0].main,h),j=b.split(",");c.innerHTML='<div id="weather_condition_icon"><img src="_img/_icons/'+i+'.svg"><em>'+h+'</em></div><div id="current_temp_icon"><h3>'+f+"<sup>&deg;<em>c</em></sup></h3></div>";var k='<div id="stage"><div id="mountains"></div><div id="sky"></div><div id="grass"></div><div id="foreground"></div></div><a id="current_temp" data-city="'+e+'" data-country="'+j[1]+'"><div id="current_temp_status"><h3>'+e+"</h3><h4>Wind: "+g+' KPH</h4></div><div id="current_temp_degree"><span id="temp_degrees">'+f+"</span><sup>&deg;<em>C</em></sup></div></a>",l=document.createElement("div");l.innerHTML=k,d.innerHTML="",d.appendChild(l);var m=document.getElementById("current_temp");m.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation();new QueryAPI("forecast",e)})}function forecastWeatherDisplay(a){var b,c=0,d=document.getElementById("app"),e='<div id="forecast_wrapper"></div>',f=document.createElement("div");f.setAttribute("id","forcast_container"),f.innerHTML=e,d.appendChild(f);var g=document.getElementById("forecast_wrapper");for(i=0;i<a.list.length;i++){var h=a.list[i],j=convertTemp(h.main.temp),k=h.dt_txt,l=document.createElement("div"),m=h.weather[0].description,n=k.split(" "),o=convertClouds(h.weather[0].main,m);if(4>=c){var p=n[1].split(":"),q=convertDay(p[0]);l.setAttribute("class","forecast_day"),l.innerHTML="<h5>"+q+'</h5><img src="_img/_icons/'+o+'.svg"><span class="forecast_weather_condition">'+m+"</span><h3>"+j+"</span><sup>&deg;<em>C</em></sup></h3>",g.appendChild(l)}c+=1,b=n[0]}}function Layout(a,b,c){switch(window.clearInterval(toggleCondtions),a){case"weather":currentWeatherDisplay(b,c);break;case"forecast":forecastWeatherDisplay(b)}}var cities_nav={cities:{0:{city:"London",country:"United Kingdom",conutryabv:"UK",image:"Bravo Music",timezone:"Mind over Matter"},1:{city:"Amsterdam",country:"Netherlands",conutryabv:"NL",image:"Bravo Music",timezone:"Mind over Matter"},2:{city:"Prague",country:"Czech Republic",conutryabv:"CZ",image:"Bravo Music",timezone:"Mind over Matter"},3:{city:"Paris",country:"France",conutryabv:"FR",image:"Bravo Music",timezone:"Mind over Matter"},4:{city:"Barcelona",country:"Spain",conutryabv:"ES",image:"Bravo Music",timezone:"Mind over Matter"}}},myCallback;$("#app").on("swipeleft",function(a){a.stopPropagation(),$(".active_city").parent().next("a").trigger("click"),console.log("swipe left")}),$("#app").on("swiperight",function(a){a.stopPropagation(),$(".active_city").parent().prev("a").trigger("click"),console.log("swipe right")});var navElement=document.getElementById("nav-cities");for(var i in cities_nav.cities){var city=cities_nav.cities[i].city,country=cities_nav.cities[i].country,countrycode=cities_nav.cities[i].conutryabv,nav_city=document.createElement("li"),nav_city_info='<a href="#/'+city+'" class="action_trigger city_nav" data-city="'+city+'" data-country="'+countrycode+'" data-api="weather">'+city+", "+countrycode+"</a>";nav_city.innerHTML=nav_city_info,navElement.appendChild(nav_city)}var newcity_trigger=document.getElementsByClassName("action_trigger");for(var n in newcity_trigger)n>=0&&newcity_trigger[n].addEventListener("click",function(a){a.stopPropagation();var b=this.dataset.city,c=this.dataset.country,d=(this.dataset.api,b+","+c),e=document.querySelectorAll(".active_city"),f=this;e[0]&&e[0].classList.remove("active_city");var g=document.createAttribute("class");g.value="active_city",f.setAttributeNode(g),$("body").addClass("current_weather_showing");new QueryAPI("weather",d)});